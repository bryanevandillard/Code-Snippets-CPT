/** Code Snippets CPT - v2.0.0 - 2016-08-14 | http://dsgnwrks.pro | Copyright (c) 2016; | Licensed GPLv2+ **/
window.snippetcpt=window.snippetcpt||{},function(a,b,c,d,e){"use strict";c.extend(d,a.snippetcptAce);var f=function(a){return c(b.getElementById(a))};d.editor=null,d.cache=function(){d.$content=c(".snippet-main-content"),d.$wrap=f("snippet-content"),d.$themeSelector=f("ace-theme-settings"),d.$settingTxt=f("ace-theme-change-label"),d.$languageSelector=c(".snippetcpt-language-selector")},d.init=function(){d.cache();var e=d.getCurrentLanguage();d.$wrap.removeClass("hidden"),d.$content.addClass("hidden"),d.editor=a.ace.edit("snippet-content"),d.theme?d.editor.setTheme(d.theme):d.editor.setTheme(d.default_theme||"ace/theme/chrome"),e?d.editor.getSession().setMode("ace/mode/"+e):d.editor.getSession().setMode(d.language||"ace/mode/text"),d.editor.setShowPrintMargin(!1),d.editor.getSession().on("change",d.updateTextarea),d.$themeSelector.on("change",d.changeTheme),d.$languageSelector.on("change",d.updateLanguage),c(b.body).trigger("code-snippet-ace-init",d)},d.getCurrentLanguage=function(){return d.$languageSelector.find(":selected").data("language")},d.updateLanguage=function(){d.editor.getSession().setMode("ace/mode/"+d.getCurrentLanguage())},d.updateTextarea=function(){d.$content.val(d.editor.getSession().getValue())},d.changeTheme=function(){d.$themeSelector.prop("disabled",!0),d.savingMsg();var b={nonce:d.nonce,theme:d.$themeSelector.val(),action:"snippetscpt-ace-ajax"};c.post(a.ajaxurl,b,d.ajaxResponse,"json")},d.ajaxResponse=function(a){a.success?(d.nonce=a.data.nonce,d.editor.setTheme(a.data.theme),d.savingMsg(!0)):(a.data.nonce&&(d.nonce=a.data.nonce),a.data.message?d.savingMsg(!0,a.data.message):d.savingMsg(!0)),d.$themeSelector.prop("disabled",!1)},d.savingMsg=function(a,b){var c=null;c=a?b?b:d.labels.default:d.labels.saving,d.$settingTxt.text(c)},c(d.init)}(window,document,jQuery,window.snippetcpt);